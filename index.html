<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zambak BahÃ§esi â€” GerÃ§ekÃ§i</title>
<style>
  :root{ --bg: radial-gradient(1200px 800px at 70% 10%, #111527 0%, #0b0d16 55%, #07080e 100%); }
  html,body{height:100%;margin:0}
  body{
    background: var(--bg);
    color:#e8ecff;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    overflow:hidden;
  }

  /* Ãœst bilgi ve mÃ¼zik dÃ¼ÄŸmesi */
  header{
    position:fixed; left:14px; top:14px; z-index:5;
    padding:10px 14px; border-radius:14px; backdrop-filter: blur(8px);
    background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  header h1{font-size:18px; margin:0 0 4px}
  header p{margin:0; font-size:13px; opacity:.85}

  .audio-toggle{
    position:fixed; right:16px; top:16px; z-index:6;
    display:flex; align-items:center; gap:8px;
    background: rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.12);
    padding:10px 12px; border-radius:12px; cursor:pointer;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
    user-select:none;
  }
  .audio-dot{ width:8px; height:8px; border-radius:50%; background:#f87171 }
  .audio-toggle.playing .audio-dot{ background:#34d399 }

  /* Sahne */
  .stage{ position:relative; width:100%; height:100%; }
  .floor{
    position:fixed; left:0; right:0; bottom:-40px; height:160px; z-index:0;
    background: radial-gradient(60% 100% at 50% 0%, rgba(99,132,255,.17), rgba(0,0,0,0) 70%);
    pointer-events:none;
  }

  /* GerÃ§ekÃ§i zambak (gÃ¶rsel) */
  .lily{
    position:absolute; width:220px; height:auto; will-change: transform, opacity;
    filter: drop-shadow(0 10px 30px rgba(0,0,0,.5)) saturate(1.05);
    opacity:0;           /* yumuÅŸak giriÅŸ/Ã§Ä±kÄ±ÅŸ */
    transition: opacity .8s ease;
    transform-origin:center;
    pointer-events:none;
    image-rendering: auto;
  }
  .lily.ready{ opacity:.98 }

  /* Ortadaki yazÄ±lar */
  .message{ position:fixed; inset:0; display:grid; place-items:center; z-index:4; pointer-events:none; }
  .message .text{
    text-align:center; font-weight:700; line-height:1.25; letter-spacing:.3px;
    max-width:min(90vw, 900px); padding:0 18px;
    text-shadow: 0 6px 28px rgba(255,220,250,.35);
    opacity:0; transform: translateY(6px) scale(.98);
    animation: fadeMsg var(--msgDur,6s) ease-in-out forwards;
  }
  @keyframes fadeMsg{
    0%{opacity:0; transform: translateY(8px) scale(.98)}
    10%{opacity:1; transform: translateY(0) scale(1)}
    90%{opacity:1}
    100%{opacity:0; transform: translateY(-8px) scale(.98)}
  }
  @media (max-width:720px){ .message .text{font-size:22px} header{display:none} }
  @media (min-width:721px){ .message .text{font-size:34px} }

  /* SaÄŸ alttaki imza */
  .credit{
    position:fixed; right:16px; bottom:14px; z-index:4; opacity:.85;
    font-size:12.5px; letter-spacing:.6px;
    background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
    padding:6px 10px; border-radius:10px; box-shadow: 0 8px 24px rgba(0,0,0,.35);
  }

  /* Ufak parÄ±ltÄ±lar */
  .spark{
    position:absolute; width:4px; height:4px; border-radius:50%;
    background: radial-gradient(circle, #fff, rgba(255,255,255,0) 70%);
    opacity:0; pointer-events:none; z-index:2; filter: blur(.2px);
  }
</style>
</head>
<body>
  <div class="audio-toggle" id="audioBtn"><div class="audio-dot"></div><span>mÃ¼zik</span></div>
  <header><h1>ðŸŒ¸ Zambak BahÃ§esi</h1><p>Ekrana tÄ±kla: daha Ã§ok zambak ve mÃ¼zik.</p></header>

  <div class="stage" id="stage" aria-label="Zambak animasyonu"></div>
  <div class="floor"></div>

  <div class="message"><div id="msg" class="text"></div></div>
  <div class="credit">emrullahaydogdu design</div>

  <!-- MÃ¼zik dosyanÄ± repoya music.mp3 olarak yÃ¼kle -->
  <audio id="bgm" src="music.mp3" loop preload="auto"></audio>

<script>
/* ------------------ KULLANICI Ä°Ã‡Ä°N Ã–NEMLÄ° ------------------
   1) Repo kÃ¶kÃ¼nde 'img' klasÃ¶rÃ¼ aÃ§.
   2) Åžeffaf arkaplanlÄ± gerÃ§ek zambak PNG'lerini buraya koy (200â€“600px).
   3) AÅŸaÄŸÄ±daki listeye dosya adlarÄ±nÄ± yaz.
-------------------------------------------------------------- */
const lilyImages = [
  'img/lily_white.png',
  'img/lily_pink.png',
  'img/lily_orange.png',
  'img/lily_purple.png'
];
// (Elinde kaÃ§ gÃ¶rsel varsa diziye ekleyebilirsin. Yoksa 2â€“3 farklÄ± PNG yeter.)

const stage = document.getElementById('stage');
const lilies = new Set();

/* --------- GerÃ§ekÃ§i hareket: rÃ¼zgÃ¢rla salÄ±nan sinÃ¼s yolu --------- */
function createRealLily(){
  if(!lilyImages.length) return;

  const img = document.createElement('img');
  img.className = 'lily';
  img.src = lilyImages[Math.floor(Math.random()*lilyImages.length)];

  // baÅŸlangÄ±Ã§ parametreleri
  const scale = Math.random()*0.5 + 0.65;              // 0.65â€“1.15
  const baseX = Math.random()*100;                      // vw
  const startY = 110;                                   // vh
  const speed = Math.random()*0.015 + 0.010;            // dÃ¼ÅŸÃ¼ÅŸ hÄ±zÄ±
  const amp = Math.random()*8 + 6;                      // salÄ±nÄ±m genliÄŸi (vw)
  const freq = Math.random()*0.9 + 0.6;                 // salÄ±nÄ±m frekansÄ±
  const rotSpeed = (Math.random()*0.2 - 0.1);           // derece/sn
  const tilt = (Math.random()*8 - 4);                   // baÅŸlangÄ±Ã§ eÄŸimi
  const depthBlur = (1 - scale) * 1.2;                  // uzaklÄ±k efekti

  let y = startY;
  let t0 = performance.now()/1000, rot = tilt;

  img.onload = ()=> img.classList.add('ready');
  img.style.filter = `drop-shadow(0 10px 30px rgba(0,0,0,.5)) blur(${depthBlur}px)`;
  stage.appendChild(img);

  const item = {el: img, baseX, y, scale, amp, freq, speed, rotSpeed, t0};
  lilies.add(item);

  function frame(now){
    if(!document.body.contains(img)){ lilies.delete(item); return; }
    const t = now/1000 - t0;
    item.y -= item.speed * 100 * (1/6);              // vh azalt
    rot += rotSpeed;

    const x = baseX + amp * Math.sin(freq * t + baseX);
    const yvh = item.y;
    const transform = `translate(${x}vw, ${yvh}vh) scale(${scale}) rotate(${rot}deg)`;
    img.style.transform = transform;

    // opacity giriÅŸ/Ã§Ä±kÄ±ÅŸ
    if(yvh < -20){
      img.style.opacity = '0';
      img.remove();
      lilies.delete(item);
      return;
    }
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

/* BaÅŸlangÄ±Ã§ta ve periyodik Ã¼retim */
for(let i=0;i<10;i++) setTimeout(createRealLily, i*300);
setInterval(()=>{ if(document.hidden) return; createRealLily(); }, 1500);

/* Ufak parÄ±ltÄ±lar (opsiyonel) */
function spark(){
  const s = document.createElement('div');
  s.className = 'spark';
  s.style.left = (Math.random()*100)+'vw';
  s.style.bottom = (Math.random()*10-5)+'vh';
  s.style.opacity = 0;
  stage.appendChild(s);
  const dur = 4000 + Math.random()*3000;
  const xDrift = 8 + Math.random()*10;
  const yUp = 30 + Math.random()*20;
  const t0 = performance.now();

  function f(now){
    const p = (now - t0)/dur;
    if(p>=1){ s.remove(); return; }
    const e = Math.sin(Math.PI * Math.min(p,1)); // ease in-out
    s.style.transform = `translate(${xDrift*e}vw, ${-yUp*e}vh)`;
    s.style.opacity = (p<0.1)? p*10 : (p>0.9? (1-p)*10 : 1);
    requestAnimationFrame(f);
  }
  requestAnimationFrame(f);
}
setInterval(()=>{ if(document.hidden) return; spark(); }, 600);

/* DÃ¶ngÃ¼lÃ¼ mesajlar */
const msgEl = document.getElementById('msg');
const messages = [
  { text: "Her zaman yanÄ±nda olacaÄŸÄ±m.", dur: 5000 },
  { text: "Sen bir gÃ¼n zambaklarÄ± sevmeyi bÄ±rakÄ±rsan; iÅŸte o gÃ¼n ben de seni sevmeyi bÄ±rakÄ±rÄ±m.", dur: 8000 }
];
let midx = 0;
function showMessage(){
  const m = messages[midx % messages.length];
  msgEl.style.setProperty('--msgDur', (m.dur/1000)+'s');
  msgEl.textContent = m.text;
  msgEl.classList.remove('text'); void msgEl.offsetWidth; msgEl.classList.add('text');
  midx++; setTimeout(showMessage, m.dur);
}
showMessage();

/* MÃ¼zik kontrolÃ¼ */
const audio = document.getElementById('bgm');
const btn = document.getElementById('audioBtn');
let playing=false;
function updateBtn(){ btn.classList.toggle('playing', playing); btn.querySelector('span').textContent = playing?'mÃ¼zik aÃ§Ä±k':'mÃ¼zik kapalÄ±'; }
async function toggleAudio(){ try{ if(!playing){ await audio.play(); playing=true; } else{ audio.pause(); playing=false; } updateBtn(); }catch(e){} }
btn.addEventListener('click', toggleAudio);
let primed=false;
window.addEventListener('pointerdown', ()=>{ if(!primed){ primed=true; toggleAudio(); } for(let i=0;i<2;i++) setTimeout(createRealLily, i*120); });
</script>
</body>
</html>
